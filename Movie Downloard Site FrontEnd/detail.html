<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Movie Theme</title>
	<link href="css/bootstrap.min.css" rel="stylesheet" >
	<link href="css/font-awesome.min.css" rel="stylesheet" >
	<link href="css/global.css" rel="stylesheet">
	<link href="css/list.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Platypi:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>

</head>
<body>

<div class="main_o main">
 <div class="main_o1 bg_back">
   <section id="header">
<nav class="navbar navbar-expand-md navbar-light px_4" id="navbar_sticky">
  <div class="container-fluid">
    <a class="navbar-brand  p-0 fw-bold text-white" href="index.html"><i class="fa fa-modx col_oran"></i> CineVerse </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
	   <ul class="navbar-nav mb-0 ms-auto">

        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="index.html">Home</a>
        </li>

		<li class="nav-item">
          <a class="nav-link" href="about.html">About Us</a>
        </li>

		<li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdown1" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Movies
          </a>
          <ul class="dropdown-menu drop_1" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="movies.html"><i class="fa fa-chevron-right font_12 me-1"></i> Movies</a></li>
            <li><a class="dropdown-item border-0" href="detail.html"><i class="fa fa-chevron-right font_12 me-1"></i> Movie Details</a></li>
          </ul>
        </li>

		<li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Pages
          </a>
          <ul class="dropdown-menu drop_1" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="login.html"><i class="fa fa-chevron-right font_12 me-1"></i> Login</a></li>
            <li><a class="dropdown-item" href="register.html"><i class="fa fa-chevron-right font_12 me-1"></i> Register</a></li>
          </ul>
        </li>

		<li class="nav-item">
          <a class="nav-link" href="contact.html">Contact Us</a>
        </li>
      </ul>
      <ul class="navbar-nav mb-0 ms-auto">
	       <li class="nav-item">
          <a class="nav-link fs-5 drop_icon" data-bs-target="#exampleModal2" data-bs-toggle="modal" href="#"><i class="fa fa-search"></i></a>
        </li>
		    <li class="nav-item">
          <a class="nav-link fs-5 drop_icon" href="#"><i class="fa fa-user"></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>
</section>
   <section id="center" class="centre_o  pt-5 pb-5">
 <div class="container-xl">
  <div class="row centre_o1 text-center">
    <div class="col-md-12">
      <h1 class="text-white font_60">Movie Details</h1>
	  <h5 class="mb-0 mt-3 fw-normal col_oran"><a class="text-light" href="#">Home</a> <span class="mx-2 text-muted">/</span> Movie Details</h5>
   </div>
  </div>
 </div>
</section>
 </div>
</div>

<div class="border_dashed">

</div>

<section id="detail" class="p_3">
 <div class="container-xl">
    <div class="detail_1 row">
	  <div class="col-md-6">
	    <div class="detail_1l">
		  <h2 id="name"></h2>
		  <h6 class="mb-0 text-muted" id="category"></h6>
		</div>
	  </div>
	  <div class="col-md-6">
	    <div class="detail_1r text-end">
		</div>
	  </div>
	</div>
	<div class="detail_2 row mt-4">
	  <div class="col-md-4">
	    <div class="detail_2l">
	      <div class="grid clearfix">
				  <figure class="effect-jazz mb-0">
				  </figure>
			  </div>
		</div>
	  </div>
	  <div class="col-md-8">
	    <div class="detail_2r  position-relative">
	       <div class="detail_2ri">
		      <div class="grid clearfix">
				  <figure class="effect-jazz mb-0">
					<a href="#"><img src="img1/img_2.png" height="530" class="w-100" alt="abc"></a>
				  </figure>
			  </div>
		   </div>
		   <div class="detail_2ri1 position-absolute top-0 text-center bg_back w-100 h-100">
		     <span class="lh-1"><a class="col_oran"  href="javascript:void(0);" data-bs-toggle="modal" data-bs-target="#templateVideoModal"><i class="fa fa-play-circle align-middle"></i></a></span>
			 <h4 class="mb-0 mt-3"><a class="text-white" href="#">Watch the Movie</a></h4>
		   </div>
		</div>
	  </div>
	</div>
 </div>
</section>
<section id="comments" class="p-3 bg-light">
	<div class="container-xl">
		<h3 class="mb-4 text-dark">Comments</h3>

		<!-- Comment form -->
		<form id="commentForm" class="mb-4">
			<div class="mb-3">
				<label for="username" class="form-label">Name</label>
				<input type="text" class="form-control" id="username" placeholder="Your name" required>
			</div>
			<div class="mb-3">
				<label for="userComment" class="form-label">Comment</label>
				<textarea class="form-control" id="userComment" rows="3" placeholder="Your comment" required></textarea>
			</div>
			<button type="button" id="saveComment" class="btn btn-primary col_oran border-0">Post Comment</button>
		</form>

		<!-- Comment view section -->
		<h4 class="mt-5 text-dark">What others are saying:</h4>
		<div id="commentViewSection" class="border rounded p-3 bg-white">
			<p class="text-muted">No comments yet. Be the first to comment!</p>
		</div>


		<!-- Display comments -->
		<div id="commentList">
			<!-- Dynamic comments will appear here -->
		</div>
	</div>
</section>


<section id="footer" class="p_3 bg-black">
 <div class="container-xl">
    <div class="footer_1 row pb-4">
	  <div class="col-md-3">
	   <div class="footer_1l">
	     <h4 class="mb-0"><a class="fw-bold text-white" href="index.html"><i class="fa fa-modx col_oran"></i> Movie Theme </a></h4>
	   </div>
	  </div>
	  <div class="col-md-9">
	   <div class="footer_1r text-end">
	     <ul class="mb-0">
		   <li class="d-inline-block"><a class="text-white-50 a_tag" href="#">Help</a></li>
		     <li class="d-inline-block text-white-50">/</li>
		   <li class="d-inline-block me-2"><a class="text-white-50 a_tag" href="#"> Privacy Policy</a></li>
		   <li class="d-inline-block"><a class="social_icon" href="#"> <i class="fa fa-twitter"></i></a></li>
		    <li class="d-inline-block"><a class="social_icon" href="#"> <i class="fa fa-facebook"></i></a></li>
			 <li class="d-inline-block"><a class="social_icon" href="#"> <i class="fa fa-instagram"></i></a></li>
			  <li class="d-inline-block"><a class="social_icon" href="#"> <i class="fa fa-pinterest"></i></a></li>
		 </ul>
	   </div>
	  </div>
	</div>
	<div class="footer_2 row mt-4">
	  <div class="col-md-3">
	   <div class="footer_2i">
	   </div>
	  </div>

	  <div class="col-md-3">
	   <div class="footer_2i">
         <h5 class="col_oran mb-4">Movies</h5>
		 <div class="row footer_1ism">
		 <h6 class="fw-normal col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Action</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Adventure</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Animation</a></h6>
	  <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Thriller</a></h6>
	   <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Crime</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6 mb-0"><a class="text-white-50 a_tag" href="#"> Comedy</a></h6>
	    </div>
	   </div>
	  </div>
	  <div class="col-md-3">
	   <div class="footer_2i">
         <h5 class="col_oran mb-4">Links</h5>
		 <div class="row footer_1ism">
		 <h6 class="fw-normal col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> About Us</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> My account</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> News</a></h6>
	  <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Latest Events</a></h6>
	   <h6 class="fw-normal mt-2 col-md-12 col-6"><a class="text-white-50 a_tag" href="#"> Privacy</a></h6>
	 <h6 class="fw-normal mt-2 col-md-12 col-6 mb-0"><a class="text-white-50 a_tag" href="#"> Contact Us</a></h6>
	    </div>
	   </div>
	  </div>

	  <div class="col-md-3">
	   <div class="footer_2i">
         <h5 class="col_oran mb-4">Newsletter</h5>
		 <p class="text-white-50">Subscribe to Leitmotif newsletter this very day.</p>
		 <div class="input-group bg-white">
				<input type="text" class="form-control bg-transparent rounded-0 border-0" placeholder="Enter Your Email">
				<span class="input-group-btn">
					<button class="btn btn-primary bg-transparent rounded-0 border-0 col_oran p-3" type="button">
						<i class="fa fa-location-arrow"></i></button>
				</span>
		</div>
		<div class="form-check mt-3 text-white-50">
<input id="flexCheckDefault" class="form-check-input" type="checkbox" value="">
<label class="form-check-label" for="flexCheckDefault">
I agree to all terms and policies of the company
</label>
</div>
	   </div>
	  </div>
	</div>
 </div>
</section>

<section id="footer_b" class="pt-3 pb-3 bg-dark">
 <div class="container-xl">
  <div class="footer_b1 row text-center">
    <div class="col-md-12">
	  <p class="mb-0 text-white-50">Â© 2013 Your Website Name. All Rights Reserved | Design by <a class="col_oran fw-bold" href="http://www.templateonweb.com">TemplateOnWeb</a></p>
	</div>
  </div>
 </div>
</section>

<!-- Video Modal -->
		<div class="modal fade" id="templateVideoModal" tabindex="-1" aria-labelledby="videoModalLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg modal-dialog-centered">
			<div class="modal-content">
			  <div class="modal-header">
				<h2 class="modal-title" id="videoModalLabel">  Video</h2>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			  </div>
			  <div class="modal-body">
					<!-- YouTube Embed -->
						<div class="ratio ratio-16x9">
							<iframe id="youtubeVideo" src="" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope" loading="lazy" allowfullscreen></iframe>
						</div>


			  </div>

			</div>
		  </div>
		</div>
		<!-- JavaScript to pause the video when modal is closed -->
		<script>

			let url;
			let loadMovie = function () {
				let movieId = localStorage.getItem("movieId");
				let token = localStorage.getItem("token")

				$.ajax({
					url: "http://localhost:8080/api/v1/movie/getMovie/" + movieId,
					type: "GET",
					headers: { "Authorization": "Bearer " + token },
					success: function(response) {
						console.log("Response:", response);
						$("#name").text(response.name);
						$("#category").text(response.category)
						url = response.filmLink;
					},
					error: function() {
						alert("Error fetching users. Please try again later.");
					}
				})
			}
			loadMovie();

		 var templateVideoModal = document.getElementById('templateVideoModal');
		  templateVideoModal.addEventListener('hide.bs.modal', function () {
			var iframe = document.getElementById('youtubeVideo');
			iframe.src = ''; 
		  });
		
		  templateVideoModal.addEventListener('show.bs.modal', function () {
			  var iframe = document.getElementById('youtubeVideo');
			  iframe.src=url;
		  });

		  $("#saveComment").click(function () {
			  let movieId = localStorage.getItem("movieId");
			  let token = localStorage.getItem("token");
			  let comment = $("#userComment").val();
			  let name = $("#username").val();

			  let formData = {
				  name : name,
				  content : comment,
				  filmId : movieId
			  }

			  $.ajax({
				  url: "http://localhost:8080/api/v1/comment/saveComment",
				  type: "POST",
				  headers: { "Authorization": "Bearer " + token },
				  contentType : "application/json",
				  data : JSON.stringify(formData),
				  success: function(response) {
					  loadComment();
				  },
				  error: function() {
					  alert("Error fetching users. Please try again later.");
				  }
			  })
		  });

		  let loadComment = function () {
			  let movieId = localStorage.getItem("movieId");
			  let token = localStorage.getItem("token");
			  let commentView = $("#commentViewSection");

			  $.ajax({
				  url: "http://localhost:8080/api/v1/comment/getComments",
				  type: "GET",
				  headers: { "Authorization": "Bearer " + token },
				  success: function(response) {
					  commentView.empty();
					  response.forEach(comment => {
						  if (comment.filmId === parseInt(movieId)) {
							  commentView.append(`
							  	<p class="text-muted"><strong>${comment.name} : </strong>${comment.content}</p>
							  `);
						  }
					  });
				  },
				  error: function() {
					  alert("Error fetching users. Please try again later.");
				  }
			  })
		  }
		  loadComment();
		</script>

<script src="js/common.js"></script>
</body>


</html>